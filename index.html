<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üîÆ(ìÅπ ìÅπ)÷¥ ‡£™ñ§ê Alchemy Lab of Latent Things</title>
  <style>
    /* Original Styles */
    body { margin:0; padding:0; background:#ffffff; color:#000; font-family:'Times New Roman', serif; line-height:1.6; }
    a { color:#0000EE; text-decoration:none; }
    header { background:#ffffff; padding:1rem; border-bottom:1px solid #bbb; text-align:center; position:relative; }
    header .header-content { max-width:900px; margin:auto; }
    header h1 { margin:0; font-size:2.5rem; color:#000; }
    header p.subtitle { margin:0.5rem 0; color:#333; font-style:italic; }
    nav { margin-top:1rem; }
    nav ul { list-style:none; display:flex; justify-content:center; padding:0; margin:0; }
    nav li { margin:0 1rem; }
    .container { display:flex; max-width:1200px; margin:2rem auto; padding:0 1rem; }
    aside { width:25%; padding-right:2rem; border-right:1px solid #bbb; }
    aside h2 { font-size:1.5rem; border-bottom:1px solid #bbb; padding-bottom:0.5rem; color:#000; }
    aside ul { list-style:none; padding:0; }
    aside li { margin:0.5rem 0; }
    main { width:75%; padding-left:2rem; }
    main section { margin-bottom:2rem; }
    main h2 { font-size:2rem; border-bottom:2px solid #bbb; padding-bottom:0.5rem; color:#000; }
    .card { background:#fff; color:#000; padding:1rem; margin:1rem 0; border:1px solid #bbb; border-radius:5px; }
    .card h3 { margin-top:0; font-size:1.8rem; }
    .links a { color:#0000EE; }
    .quick-links { padding:0.5rem; border:1px solid #bbb; border-radius:5px; background:#fff; }
    footer { text-align:center; padding:1rem; background:#ffffff; border-top:1px solid #bbb; font-size:0.8rem; color:#000; }

    /* Cursed Overrides */
    .cursed body { background:#111 !important; color:#eee !important; }
    .cursed a { color:#4af !important; }
    .cursed header { background:#111 !important; border-color:#333 !important; }
    .cursed header h1 { color:#eee !important; position:relative; animation:glitch 3s infinite; }
    .cursed header h1::before,
    .cursed header h1::after {
      content:attr(data-text);
      position:absolute; top:0; left:0; width:100%; height:100%; clip:rect(0,0,0,0);
    }
    .cursed header h1::before { left:2px; text-shadow:-2px 0 red; animation:glitch 2.5s infinite; }
    .cursed header h1::after  { left:-2px; text-shadow:-2px 0 blue; animation:glitch 3.5s infinite; }
    .cursed header p.subtitle { color:#ccc !important; }
    .cursed nav ul li a { color:#4af !important; }
    .cursed aside { border-color:#333 !important; }
    .cursed aside h2 { color:#eee !important; border-color:#333 !important; }
    .cursed .quick-links { background:#222 !important; border-color:#333 !important; color:#eee !important; }
    .cursed main h2 { color:#eee !important; border-color:#333 !important; animation:glitch 3s infinite; position:relative; }
    .cursed .card { background:#222 !important; color:#eee !important; border-color:#333 !important; }
    .cursed .links a { color:#4af !important; }
    .cursed footer { background:#111 !important; border-color:#333 !important; color:#777 !important; }

    /* Noise Overlay */
    canvas#noise { position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; mix-blend-mode:lighten; opacity:0.08; display:none; }

    /* Glitch Animation */
    @keyframes glitch {
      0%,100% { clip:rect(0,9999px,0,0); transform:none; }
      10% { clip:rect(20px,9999px,80px,0); transform:translate(-2px,-2px); }
      20% { clip:rect(70px,9999px,120px,0); transform:translate(2px,2px); }
      30% { clip:rect(10px,9999px,50px,0); transform:translate(-1px,1px); }
      40% { clip:rect(80px,9999px,140px,0); transform:translate(2px,-1px); }
    }

    /* Toggle Button */
    #toggleCursed {
      position:absolute; top:1rem; right:1rem;
      background:#0000EE; border:none; color:#fff;
      padding:0.5rem 1rem; cursor:pointer; border-radius:4px;
      font-weight:bold;
    }

    /* Mobile Friendly Adjustments */
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
        max-width: 100%;
        margin: 1rem auto;
        padding: 0 1rem;
      }
      aside, main {
        width: 100%;
        padding: 0;
        margin: 0;
      }
      aside {
        border: none;
        border-bottom: 1px solid #bbb;
        margin-bottom: 1rem;
      }
      header h1 { font-size: 2rem; }
      nav ul { flex-direction: column; gap: 0.5rem; }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-content">
      <h1 data-text="üîÆ(ìÅπ ìÅπ)÷¥ ‡£™ñ§ê Alchemy Lab of Latent Things">üîÆ(ìÅπ ìÅπ)÷¥ ‡£™ñ§ê Alchemy Lab of Latent Things</h1>
      <!-- The hidden message is stored in a data attribute -->
      <p class="subtitle hidden-message" data-original="&quot;Too dumb for distributed computing, too broke for a second GPU.&quot; - Nicolas Flamel"></p>
    </div>
    <nav>
      <ul>
        <li><a href="#about">About</a></li>
        <li><a href="#work">Work</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </nav>
    <button id="toggleCursed">Cursed View</button>
  </header>

  <div class="container">
    <aside>
      <div class="quick-links">
        <h2>Quick Links</h2>
        <ul>
          <li><a href="https://github.com/donkeyanaphora" target="_blank">GitHub</a></li>
          <li><a href="cv.pdf" target="_blank">CV</a></li>
          <li><a href="https://www.linkedin.com/in/collins-westnedge/" target="_blank">LinkedIn</a></li>
        </ul>
      </div>
    </aside>
    <main>
      <section id="about">
        <h2>About</h2>
        <p>A lab for the black-box arts and turning noise into signal: part science, part spellwork, mostly vibes. No guarantees. Only gradients</p>
      </section>
      <section id="work">
        <h2>Work</h2>
        <div class="card">
          <h3>Shallow Fusion: Bridging Data Scarcity and AI Integration Challenges</h3>
          <p>A minor rant about "AI adoption" and exploration of shallow fusion as a method to address data scarcity and integration in specialized domains.</p>
          <div class="links">
            <a href="articles/article1/shallow_fusion.html">Read Article</a> |
            <a href="https://github.com/donkeyanaphora/SHALLOW_FUSION" target="_blank">GPT2 Pipeline</a> |
            <a href="https://github.com/donkeyanaphora/SHALLOW_FUSION/blob/main/notebooks/shallow_fusion_demo.ipynb" target="_blank">View Demo</a>
          </div>
        </div>
        <div class="card">
          <h3>Unleashing Linear Models in Modern Applications</h3>
          <p>A closer look at how using least squares projection can offer a stable alternative to semantic filtering.</p>
          <div class="links">
            <a href="articles/article2.html">Read Article</a> |
            <a href="projects/project2.html" target="_blank">View Demo</a>
          </div>
        </div>
      </section>
      <section id="contact">
        <h2>Contact</h2>
        <p>For inquiries, please email me at <a href="mailto:donkey@example.com">donkey@example.com</a>.</p>
      </section>
    </main>
  </div>

  <footer>
    <p>&copy; 2025 Donkey Anaphora. All rights reserved.</p>
  </footer>

  <canvas id="noise"></canvas>
  <script>
    // ROT13 function to encode/decode the hidden message
    function rot13(str) {
      return str.replace(/[a-zA-Z]/g, function(c) {
        return String.fromCharCode(
          (c <= "Z" ? 90 : 122) >= (c = c.charCodeAt(0) + 13) ? c : c - 26
        );
      });
    }

    // Gather text nodes for glitch effect (excluding certain elements)
    const marks = ["Ãç","Ãé","ÃÑ","ÃÖ","Ãø","Ãë","ÃÜ","Ãê","Õí","Õó","Õë","Õì","Õã","Õå","ÃÉ","ÃÇ","Ãå","Õê","ÃÄ","ÃÅ","Ãè","Ãí","Ãì","Ãî","ÃΩ","Ãâ","Õ£","Õ§","Õ•","Õ¶","Õß","Õ®","Õ©","Õ™","Õ´","Õ¨","Õ≠","ÕÆ","ÕØ","Ãæ","Õõ","ÕÜ","Ãö"];
    const textNodes = [];
    document.querySelectorAll('body *').forEach(el => {
      if (el.closest('nav, aside.quick-links, footer, a')) return;
      el.childNodes.forEach(node => {
        if (node.nodeType === Node.TEXT_NODE && /\S/.test(node.textContent)) {
          textNodes.push({ node, original: node.textContent });
        }
      });
    });

    // Noise animation for the background
    (function(){
      const canvas = document.getElementById('noise'),
            ctx = canvas.getContext('2d');
      function resize(){ canvas.width = innerWidth; canvas.height = innerHeight; }
      window.addEventListener('resize', resize);
      resize();
      (function draw(){
        const img = ctx.createImageData(canvas.width, canvas.height);
        for(let i = 0; i < img.data.length; i += 4){
          const v = Math.random() * 255;
          img.data[i] = img.data[i+1] = img.data[i+2] = v;
          img.data[i+3] = Math.random() * 50;
        }
        ctx.putImageData(img, 0, 0);
        requestAnimationFrame(draw);
      })();
    })();

    let cursed = false;
    const noiseCanvas = document.getElementById('noise');
    const toggle = document.getElementById('toggleCursed');

    function scrollJitter(){ if(Math.random() < 0.15) window.scrollBy(0, (Math.random() > 0.5 ? 1 : -1) * 30); }

    function applyCursed() {
      document.documentElement.classList.add('cursed');
      noiseCanvas.style.display = 'block';
      document.body.style.cursor = "url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAALCAYAAABBayygAAAAKUlEQVQYV2NkYGD4z0ABYTAwMCYh8GBgYGBjEwMDAwMDAwMDAwMBABAAFAAZ2qk2wAAAAASUVORK5CYII='), auto";
      window.addEventListener('wheel', scrollJitter);
      textNodes.forEach(({node, original}) => {
        node.textContent = original.split('').map(ch => ch + marks[Math.floor(Math.random() * marks.length)]).join('');
      });
      // Reveal the hidden message by decoding it (using the original text)
      document.querySelectorAll('.hidden-message').forEach(el => {
        const original = el.getAttribute('data-original');
        el.textContent = original;
      });
      toggle.textContent = 'Original View';
    }

    function revertOriginal() {
      document.documentElement.classList.remove('cursed');
      noiseCanvas.style.display = 'none';
      document.body.style.cursor = '';
      window.removeEventListener('wheel', scrollJitter);
      textNodes.forEach(({node, original}) => node.textContent = original);
      // Encode the hidden message using ROT13 for the main view
      document.querySelectorAll('.hidden-message').forEach(el => {
        const original = el.getAttribute('data-original');
        el.textContent = rot13(original);
      });
      toggle.textContent = 'Cursed View';
    }

    toggle.addEventListener('click', () => {
      cursed = !cursed;
      cursed ? applyCursed() : revertOriginal();
    });

    // Initialize with the hidden message encoded
    revertOriginal();
  </script>
</body>
</html>
