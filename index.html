<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>COLLINS WESTNEDGE ‚Äî Home Page</title>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<style>
/* ========== DESIGN TOKENS ========== */
:root{
  --bg-img:url("assets/starfield_tile.gif"); --bg-col:#fff; --txt:#000;
  --h1:#ff0000; --h1-shadow:#ffff00; --link:#00f; --visited:#808;
  --section-border:#00f; --card-border:#008; --card-bg:#ffffe8;
  --aside-bg:#f5f5f5; --nav-bg:#e0e0e0; --footer-bg:#e4e4e4;
  --uc-bg:#fff0f0; --uc-border:#f00; --passage-bg:#fdfdfd;
}
html.theme-dark{
  --bg-img:url("assets/starfield_tile_dark.gif"); --bg-col:#000; --txt:#e0e0e0;
  --h1:#ff7373; --h1-shadow:#ff0000; --link:#5ab9ff; --visited:#c78bff;
  --section-border:#5ab9ff; --card-border:#5ab9ff; --card-bg:#111;
  --aside-bg:#1a1a1a; --nav-bg:#1f1f1f; --footer-bg:#1a1a1a;
  --uc-bg:#330000; --uc-border:#ff7373; --passage-bg:#111;
}
/* ========== GLOBAL ========== */
body{margin:0;background:var(--bg-img) repeat, var(--bg-col);color:var(--txt);font-family:"Comic Sans MS","Trebuchet MS",Tahoma,sans-serif;text-align:center;transition:.4s all;}
a{color:var(--link);}a:visited{color:var(--visited);}a:hover{background:var(--h1-shadow);}
h1{margin:.5em 0;font-size:2.5rem;color:var(--h1);text-shadow:2px 2px 0 var(--h1-shadow);}
h2{margin:0 0 .5em;font-size:1.5rem;color:var(--link);}

/* LAYOUT */
#wrapper{width:90%;margin:0 auto;text-align:left;max-width:800px;}

/* COLLAPSIBLE SECTIONS */
details.section{margin:1rem 0;border:3px double var(--section-border);background:var(--passage-bg);padding:1rem;}
details.section summary{cursor:pointer;font-weight:bold;color:var(--link);font-size:1.25rem;padding:.5rem 0;}
details.section summary::-webkit-details-marker{display:none;}
details.section summary::before{content:"‚ñ∏ ";display:inline-block;transition:transform .2s;}
details.section[open] summary::before{transform:rotate(90deg);}
details.section > div{margin-top:1rem;}

/* CARD */
.card{border:2px ridge var(--card-border);background:var(--card-bg);padding:1rem;margin:1rem 0;}
.card h3{margin-top:0;color:var(--card-border);}

/* UC */
.uc{display:flex;align-items:center;gap:8px;justify-content:center;border:3px dashed var(--uc-border);background:var(--uc-bg);padding:.75rem;margin:1rem 0;font-weight:bold;}

/* BLOCKQUOTE */
blockquote{margin:1rem 0;padding-left:1.5rem;border-left:4px solid var(--section-border);font-style:italic;}
.attribution{text-align:right;font-style:normal;margin-top:1rem;color:var(--visited);}

/* MOOD BOARD */
.mood-item{
  border:2px ridge var(--card-border);
  background:var(--card-bg);
  padding:1rem;
  margin:1.5rem 0;
}
.mood-item h3{
  margin-top:0;
  color:var(--card-border);
  font-size:1.1rem;
}
.mood-image{
  text-align:center;
  padding:1rem;
}
.mood-image img{
  max-width:100%;
  height:auto;
  border:1px solid var(--section-border);
  display:block;
  margin:0 auto;
}

/* SKETCH PAD MODAL */
.modal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.5);
}
.modal-content {
  background-color: var(--card-bg);
  position: fixed;
  border: 3px double var(--section-border);
  width: 600px;
  height: 400px;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  resize: both;
  overflow: hidden;
  min-width: 400px;
  min-height: 300px;
}
.modal-header {
  padding: 10px;
  background: var(--nav-bg);
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
  border-bottom: 2px solid var(--section-border);
  user-select: none;
  position: relative;
}
.modal-header h2 {
  margin: 0;
  font-size: 1.2rem;
  text-align: center;
}
.window-controls {
  display: flex;
  gap: 10px;
  position: absolute;
  right: 10px;
}
.window-controls button {
  background: transparent;
  border: none;
  cursor: pointer;
  font-size: 1.2rem;
  color: var(--txt);
  padding: 0 5px;
}
.window-controls button:hover {
  color: var(--link);
}
.modal-body {
  padding: 10px;
  height: calc(100% - 52px);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
.sketch-container {
  text-align: center;
  user-select: none;
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
}
.sketch-canvas {
  border: 2px solid var(--section-border);
  background: #fff;
  cursor: crosshair;
  touch-action: none;
  flex: 1;
  width: 100%;
  min-height: 0;
}
.theme-dark .sketch-canvas {
  background: #222;
}
.sketch-controls {
  display: flex;
  gap: 0.5rem;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 10px;
  flex-shrink: 0;
  min-height: 40px;
}
.sketch-controls button {
  padding: 0.3rem 0.8rem;
  border: 2px outset #c0c0c0;
  background: var(--nav-bg);
  font-family: inherit;
  cursor: pointer;
  font-weight: bold;
}
.sketch-controls button:active {
  border-style: inset;
}
.color-btn {
  width: 30px;
  height: 30px;
  padding: 0 !important;
  border: 2px outset #c0c0c0;
}
.color-btn.active {
  border-style: inset;
}

/* MOBILE RESPONSIVE */
@media (max-width: 768px) {
  .mood-image img {
    max-width: 100%;
    width: 100%;
    height: auto;
  }
  
  .mood-item {
    padding: 0.5rem;
  }
  
  .mood-image {
    padding: 0.5rem;
  }
  
  .modal-content {
    width: 95%;
    height: 70%;
  }
}

/* FOOTER */
footer{margin-top:3rem;border-top:2px solid #000;padding:1rem;font-size:.9rem;background:var(--footer-bg);}

/* FLOATING BUTTONS */
.float-btn{position:fixed;bottom:1rem;right:1rem;padding:.5rem 1rem;font-weight:bold;border:2px outset #c0c0c0;background:var(--nav-bg);color:var(--txt);cursor:pointer;}
#sketchBtn{right:5rem;}

/* QUICK LINKS */
.quick-links{display:flex;gap:1rem;justify-content:center;margin:1rem 0;flex-wrap:wrap;}
.quick-links a{padding:.5rem 1rem;border:2px outset #c0c0c0;background:var(--nav-bg);text-decoration:none;}
</style>
</head>
<body>
<button id="toggleDark" class="float-btn" aria-label="Toggle dark mode">üåô</button>
<button id="sketchBtn" class="float-btn" aria-label="Open sketchpad">‚úçÔ∏è</button>

<!-- Sketch Modal -->
<div id="sketchModal" class="modal">
  <div class="modal-content" id="modalContent">
    <div class="modal-header">
      <h2>‚úéWHITEBOARD</h2>
      <div class="window-controls">
        <button id="fullscreenBtn">‚õ∂</button>
        <button class="close">&times;</button>
      </div>
    </div>
    <div class="modal-body">
      <div class="sketch-container">
        <canvas id="sketchpad" class="sketch-canvas"></canvas>
        <div class="sketch-controls">
          <button class="color-btn active" data-color="#000000" style="background:#000"></button>
          <button class="color-btn" data-color="#ff0000" style="background:#f00"></button>
          <button class="color-btn" data-color="#0000ff" style="background:#00f"></button>
          <button class="color-btn" data-color="#00ff00" style="background:#0f0"></button>
          <button class="color-btn" data-color="eraser" style="background:#fff;border-color:#000">‚å´</button>
          <button id="clearBtn">Clear</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- <h1>~*~ COLLINS WESTNEDGE ~*~</h1> -->
<h1>üîÆ(ìÅπ ìÅπ) The Latent Realm ìÜè</h1>
<p id="quip" style="font-style:italic;margin:1rem 0;">"Man is something that shall be overcome"</p>

<div id="wrapper">
  <div class="quick-links">
    <a href="https://github.com/donkeyanaphora" target="_blank">GitHub</a>
    <a href="https://huggingface.co/cwestnedge" target="_blank">HuggingFace</a>
    <a href="cv.pdf" target="_blank">CV</a>
    <a href="https://www.linkedin.com/in/collins-westnedge/" target="_blank">LinkedIn</a>
  </div>

  <details class="section" open>
    <summary>üó∫Ô∏è About Me</summary>
    <div>
      <p>Hi, I'm Collins. I work as a Senior Data Scientist. My background is in philosophy, specifically in the philosophy of language, where my studies focused on various phenomena in natural language and the ways in which these phenomena can be formalized. This interest eventually led me to explore probabilistic approaches to language, and in turn the field of data science and machine learning as a whole.</p>
    </div>
  </details>

  <details class="section">
    <summary>üõ†Ô∏è Articles / Work</summary>
    <div>
      <div class="card">
        <h3>Shallow Fusion: Bridging Data Scarcity and AI Integration Challenges</h3>
        <p>A minor rant about "AI adoption" and exploration of shallow fusion as a method to address data scarcity and integration in specialized domains.</p>
        <p><a href="articles/article1/shallow_fusion.html">Read Article</a> ¬∑ <a href="https://github.com/donkeyanaphora/SHALLOW_FUSION" target="_blank">GPT2 Pipeline</a> ¬∑ <a href="https://github.com/donkeyanaphora/SHALLOW_FUSION/blob/main/notebooks/shallow_fusion_demo.ipynb" target="_blank">Demo</a></p>
      </div>
      <div class="card">
        <h3>Using Linear Models in Modern Applications</h3>
        <p>A closer look at how using least squares projection can offer a stable alternative to semantic filtering.</p>
        <p><a href="articles/article2.html">Read Article</a> ¬∑ <a href="projects/project2.html" target="_blank">Demo</a></p>
      </div>
    </div>
  </details>

  <details class="section">
    <summary>üî¨ Research Interests</summary>
    <div>
      <ul>
        <li>Mechanistic Interpretability</li>
        <li>Alignment</li>
        <li>Adversarial Machine Learning & Robustness</li>
        <li>NLP</li>
      </ul>
    </div>
  </details>

  <details class="section">
    <summary>üöß Coming Soon</summary>
    <div>
      <div class="uc">
        <img src="/api/placeholder/40/40" alt="Under construction" height="40"/>
        <span>Section UNDER CONSTRUCTION ‚Äî check back soon!</span>
      </div>
    </div>
  </details>

  <details class="section">
    <summary>üñºÔ∏è Mood Board</summary>
    <div>
      <div class="mood-item">
        <h3>ü§ï On Bad Conscience</h3>
        <blockquote>
          <p>At this point I can no longer avoid giving a first, preliminary expression to my own theory on the origin of <em>bad conscience</em>: it is not easy to get a hearing for this hypothesis, and it needs to be pondered, watched, and slept on.</p>
          
          <p>I look on bad conscience as a serious illness to which man was forced to succumb by the pressure of the most fundamental of all changes which he experienced‚Äî that change whereby he finally found himself imprisoned within the confines of society and peace.</p>
          
          <p>It must have been no different for these semi-animals, happily adapted to the wilderness, war, the wandering life and adventure, than it was for the sea animals when they were forced to either become land animals or perish‚Äîat one go, all instincts were devalued and <em>suspended</em>.</p>
          
          <p>Now they had to walk on their feet and "carry themselves," whereas they had been carried by the water up till then: a terrible heaviness bore down on them. They felt clumsy at performing the simplest task; they no longer had their familiar guide in this new, unknown world‚Äîthose regulating impulses that had unconsciously led them to safety.</p>
          
          <p>The poor creatures were reduced to relying on thinking, inference, calculation, and the connecting of cause with effect‚Äîin other words, to relying on their <em>consciousness</em>, that most impoverished and error-prone organ! I do not think there has ever been such a feeling of misery on earth, such a leaden discomfort‚Äîand meanwhile, the old instincts had not suddenly ceased to make their demands!</p>
          
          <p class="attribution">‚Äî Friedrich Nietzsche, On the Genealogy of Morals, Second Essay, ¬ß16</p>
        </blockquote>
      </div>

      <div class="mood-item">
        <h3>ü§´ Machines at Work</h3>
        <div class="mood-image">
          <img src="/api/placeholder/300/400" alt="Quiet Please ‚Äî Machines Are Learning" />
          <p style="margin-top: 0.5rem; font-style: italic;">Quiet Please ‚Äî Machines Are Learning</p>
        </div>
      </div>
    </div>
  </details>

  <details class="section">
    <summary>‚úâÔ∏è Contact</summary>
    <div>
      <p>Email: <a href="mailto:cwestnedge@gmail.com">cwestnedge@gmail.com</a></p>
    </div>
  </details>
</div>

<footer>&copy; 2025 Donkey Anaphora. All rights reserved.</footer>

<script>
/* Quote rotation */
const quotes = ["Man is something that shall be overcome"];
let qi = 0;
setInterval(() => {
  qi = (qi + 1) % quotes.length;
  document.getElementById('quip').textContent = `"${quotes[qi]}"`;
}, 10000);

/* Dark mode toggle with persistence */
const root = document.documentElement;
const btn = document.getElementById('toggleDark');

// Check if localStorage is available
let storageAvailable = false;
try {
  storageAvailable = typeof localStorage !== 'undefined' && localStorage !== null;
  if (storageAvailable && localStorage.theme === 'dark') {
    root.classList.add('theme-dark');
  }
} catch (e) {
  console.log('localStorage not available');
}

btn.textContent = root.classList.contains('theme-dark') ? '‚òÄÔ∏è' : 'üåô';
btn.onclick = () => {
  root.classList.toggle('theme-dark');
  if (storageAvailable) {
    try {
      localStorage.theme = root.classList.contains('theme-dark') ? 'dark' : 'light';
    } catch (e) {
      // Ignore localStorage errors
    }
  }
  btn.textContent = root.classList.contains('theme-dark') ? '‚òÄÔ∏è' : 'üåô';
};

/* Sketch Pad Modal Functionality */
const modal = document.getElementById('sketchModal');
const modalContent = document.getElementById('modalContent');
const sketchBtn = document.getElementById('sketchBtn');
const closeBtn = document.querySelector('.close');
const fullscreenBtn = document.getElementById('fullscreenBtn');

// Canvas and drawing variables
let canvas, ctx;
let isDrawing = false;
let currentColor = '#000000';
let isEraser = false;
let canvasData = null;

// Resize observer for modal
const resizeObserver = new ResizeObserver(entries => {
  for (let entry of entries) {
    if (entry.target === modalContent) {
      // Save current canvas
      if (canvas && ctx) {
        canvasData = ctx.getImageData(0, 0, canvas.width, canvas.height);
      }
      
      // Reinitialize canvas
      setTimeout(() => {
        initSketchpad();
        
        // Restore canvas data if available
        if (canvasData && canvas.width >= canvasData.width && canvas.height >= canvasData.height) {
          ctx.putImageData(canvasData, 0, 0);
        }
      }, 100);
    }
  }
});

// Start observing the modal
document.addEventListener('DOMContentLoaded', () => {
  resizeObserver.observe(modalContent);
});

// Open modal
sketchBtn.onclick = function() {
  modal.style.display = "block";
  
  // Always reset to center when opening
  modalContent.style.transform = 'translate(-50%, -50%)';
  xOffset = 0;
  yOffset = 0;
  
  initSketchpad();
}

// Close modal
closeBtn.onclick = function() {
  modal.style.display = "none";
  // Reset position when closing
  modalContent.style.transform = 'translate(-50%, -50%)';
  xOffset = 0;
  yOffset = 0;
}

window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
    // Reset position when clicking outside
    modalContent.style.transform = 'translate(-50%, -50%)';
    xOffset = 0;
    yOffset = 0;
  }
}

// Fullscreen toggle
let isFullscreen = false;
fullscreenBtn.onclick = function() {
  if (!isFullscreen) {
    // Go fullscreen
    modalContent.style.width = '100%';
    modalContent.style.height = '100%';
    modalContent.style.top = '0';
    modalContent.style.left = '0';
    modalContent.style.transform = 'none';
    modalContent.style.resize = 'none';
    fullscreenBtn.textContent = '‚õå';
    isFullscreen = true;
  } else {
    // Exit fullscreen
    modalContent.style.width = '600px';
    modalContent.style.height = '400px';
    modalContent.style.top = '50%';
    modalContent.style.left = '50%';
    modalContent.style.transform = 'translate(-50%, -50%)';
    modalContent.style.resize = 'both';
    fullscreenBtn.textContent = '‚õ∂';
    isFullscreen = false;
    
    // Reset offsets when exiting fullscreen
    xOffset = 0;
    yOffset = 0;
  }
  
  // Reinitialize canvas with new size
  setTimeout(() => {
    initSketchpad();
  }, 100);
}

/* Initialize sketchpad */
function initSketchpad() {
  canvas = document.getElementById('sketchpad');
  ctx = canvas.getContext('2d');
  
  // Calculate available space for canvas
  const container = canvas.parentElement;
  const rect = container.getBoundingClientRect();
  const controls = document.querySelector('.sketch-controls');
  const controlsHeight = controls ? controls.offsetHeight : 50;
  
  // Set canvas size to match available space
  canvas.width = rect.width;
  canvas.height = Math.max(100, rect.height - controlsHeight - 20); // Leave space for controls
  
  // Set drawing styles
  ctx.lineWidth = 2;
  ctx.lineCap = 'round';
  ctx.lineJoin = 'round';
  ctx.strokeStyle = currentColor;
  
  // Fill background
  ctx.fillStyle = document.documentElement.classList.contains('theme-dark') ? '#222' : '#fff';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  
  // Remove any existing event listeners
  canvas.removeEventListener('mousedown', handleMouseDown);
  canvas.removeEventListener('mousemove', handleMouseMove);
  canvas.removeEventListener('mouseup', handleMouseUp);
  canvas.removeEventListener('mouseout', handleMouseUp);
  
  // Add event listeners
  canvas.addEventListener('mousedown', handleMouseDown);
  canvas.addEventListener('mousemove', handleMouseMove);
  canvas.addEventListener('mouseup', handleMouseUp);
  canvas.addEventListener('mouseout', handleMouseUp);
  
  // Touch events
  canvas.addEventListener('touchstart', handleTouchStart, { passive: false });
  canvas.addEventListener('touchmove', handleTouchMove, { passive: false });
  canvas.addEventListener('touchend', handleTouchEnd);
  
  // Color selection
  document.querySelectorAll('.color-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      document.querySelector('.color-btn.active')?.classList.remove('active');
      e.currentTarget.classList.add('active');
      const color = e.currentTarget.dataset.color;
      
      if (color === 'eraser') {
        isEraser = true;
        ctx.lineWidth = 10; // Larger size for eraser
        ctx.strokeStyle = document.documentElement.classList.contains('theme-dark') ? '#222' : '#fff';
      } else {
        isEraser = false;
        currentColor = color;
        ctx.lineWidth = 2; // Normal size for pencil
        ctx.strokeStyle = currentColor;
      }
    });
  });
  
  // Clear button
  document.getElementById('clearBtn').addEventListener('click', () => {
    ctx.fillStyle = document.documentElement.classList.contains('theme-dark') ? '#222' : '#fff';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
  });
}

/* Drawing functions */
function getMousePos(e) {
  const rect = canvas.getBoundingClientRect();
  const scaleX = canvas.width / rect.width;
  const scaleY = canvas.height / rect.height;
  
  return {
    x: (e.clientX - rect.left) * scaleX,
    y: (e.clientY - rect.top) * scaleY
  };
}

function getTouchPos(e) {
  const rect = canvas.getBoundingClientRect();
  const scaleX = canvas.width / rect.width;
  const scaleY = canvas.height / rect.height;
  
  return {
    x: (e.touches[0].clientX - rect.left) * scaleX,
    y: (e.touches[0].clientY - rect.top) * scaleY
  };
}

function handleMouseDown(e) {
  isDrawing = true;
  const pos = getMousePos(e);
  ctx.beginPath();
  ctx.moveTo(pos.x, pos.y);
}

function handleMouseMove(e) {
  if (!isDrawing) return;
  const pos = getMousePos(e);
  ctx.lineTo(pos.x, pos.y);
  ctx.stroke();
  
  // Update stroke style if using eraser and theme changes
  if (isEraser) {
    ctx.strokeStyle = document.documentElement.classList.contains('theme-dark') ? '#222' : '#fff';
  }
}

function handleMouseUp() {
  isDrawing = false;
}

function handleTouchStart(e) {
  e.preventDefault();
  isDrawing = true;
  const pos = getTouchPos(e);
  ctx.beginPath();
  ctx.moveTo(pos.x, pos.y);
}

function handleTouchMove(e) {
  e.preventDefault();
  if (!isDrawing) return;
  const pos = getTouchPos(e);
  ctx.lineTo(pos.x, pos.y);
  ctx.stroke();
  
  // Update stroke style if using eraser and theme changes
  if (isEraser) {
    ctx.strokeStyle = document.documentElement.classList.contains('theme-dark') ? '#222' : '#fff';
  }
}

function handleTouchEnd() {
  isDrawing = false;
}

// Make modal draggable
let isDragging = false;
let currentX;
let currentY;
let initialX;
let initialY;
let xOffset = 0;
let yOffset = 0;

const modalHeader = document.querySelector('.modal-header');

modalHeader.addEventListener('mousedown', dragStart);
document.addEventListener('mousemove', drag);
document.addEventListener('mouseup', dragEnd);

function dragStart(e) {
  if (e.target.closest('.window-controls')) return;
  if (isFullscreen) return; // Don't allow dragging in fullscreen
  
  initialX = e.clientX - xOffset;
  initialY = e.clientY - yOffset;
  
  isDragging = true;
}

function drag(e) {
  if (isDragging) {
    e.preventDefault();
    
    const newX = e.clientX - initialX;
    const newY = e.clientY - initialY;
    
    // Get modal dimensions
    const rect = modalContent.getBoundingClientRect();
    const windowWidth = window.innerWidth;
    const windowHeight = window.innerHeight;
    
    // Calculate where the edges would be with the new position
    const leftEdge = windowWidth/2 + newX - rect.width/2;
    const rightEdge = windowWidth/2 + newX + rect.width/2;
    const topEdge = windowHeight/2 + newY - rect.height/2;
    const bottomEdge = windowHeight/2 + newY + rect.height/2;
    
    // Keep at least 50px visible on each side
    const minVisible = 50;
    
    // Apply constraints
    if (leftEdge < -rect.width + minVisible) {
      currentX = -windowWidth/2 - rect.width/2 + minVisible;
    } else if (rightEdge > windowWidth + rect.width - minVisible) {
      currentX = windowWidth/2 + rect.width/2 - minVisible;
    } else {
      currentX = newX;
    }
    
    if (topEdge < -rect.height + minVisible) {
      currentY = -windowHeight/2 - rect.height/2 + minVisible;
    } else if (bottomEdge > windowHeight + rect.height - minVisible) {
      currentY = windowHeight/2 + rect.height/2 - minVisible;
    } else {
      currentY = newY;
    }
    
    xOffset = currentX;
    yOffset = currentY;
    
    setTranslate(currentX, currentY, modalContent);
  }
}

function dragEnd() {
  initialX = currentX;
  initialY = currentY;
  isDragging = false;
}

function setTranslate(xPos, yPos, el) {
  el.style.transform = `translate(calc(-50% + ${xPos}px), calc(-50% + ${yPos}px))`;
}
</script>
</body>
</html>