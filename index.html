<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>COLLINS WESTNEDGE ‚Äî Home Page</title>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<style>
/* ========== DESIGN TOKENS ========== */
:root{
  --bg-img:url("assets/starfield_tile.gif"); --bg-col:#fff; --txt:#000;
  --h1:#ff0000; --h1-shadow:#ffff00; --link:#00f; --visited:#808;
  --section-border:#00f; --card-border:#008; --card-bg:#ffffe8;
  --aside-bg:#f5f5f5; --nav-bg:#e0e0e0; --footer-bg:#e4e4e4;
  --uc-bg:#fff0f0; --uc-border:#f00; --passage-bg:#fdfdfd;
}
html.theme-dark{
  --bg-img:url("assets/starfield_tile_dark.gif"); --bg-col:#000; --txt:#e0e0e0;
  --h1:#ff7373; --h1-shadow:#ff0000; --link:#5ab9ff; --visited:#c78bff;
  --section-border:#5ab9ff; --card-border:#5ab9ff; --card-bg:#111;
  --aside-bg:#1a1a1a; --nav-bg:#1f1f1f; --footer-bg:#1a1a1a;
  --uc-bg:#330000; --uc-border:#ff7373; --passage-bg:#111;
}

html,body{height:100%;}

/* ========== GLOBAL ========== */
body{margin:0;background:var(--bg-img) repeat, var(--bg-col);color:var(--txt);font-family:"Comic Sans MS","Trebuchet MS",Tahoma,sans-serif;text-align:center;transition:.4s all;}
a{color:var(--link);}a:visited{color:var(--visited);}a:hover{background:var(--h1-shadow);}
h1{margin:.5em 0;font-size:2.5rem;color:var(--h1);text-shadow:2px 2px 0 var(--h1-shadow);}h2{margin:0 0 .5em;font-size:1.5rem;color:var(--link);}

/* LAYOUT */
#wrapper{width:90%;margin:0 auto;text-align:left;max-width:800px;}

/* COLLAPSIBLE SECTIONS */
details.section{margin:1rem 0;border:3px double var(--section-border);background:var(--passage-bg);padding:1rem;}
details.section summary{cursor:pointer;font-weight:bold;color:var(--link);font-size:1.25rem;padding:.5rem 0;}
details.section summary::-webkit-details-marker{display:none;}
details.section summary::before{content:"‚ñ∏ ";display:inline-block;transition:transform .2s;}
details.section[open] summary::before{transform:rotate(90deg);}details.section > div{margin-top:1rem;}

/* CARD */
.card{border:2px ridge var(--card-border);background:var(--card-bg);padding:1rem;margin:1rem 0;}
.card h3{margin-top:0;color:var(--card-border);}

/* UC */
.uc{display:flex;align-items:center;gap:8px;justify-content:center;border:3px dashed var(--uc-border);background:var(--uc-bg);padding:.75rem;margin:1rem 0;font-weight:bold;}

/* BLOCKQUOTE */
blockquote{margin:1rem 0;padding-left:1.5rem;border-left:4px solid var(--section-border);font-style:italic;}
.attribution{text-align:right;font-style:normal;margin-top:1rem;color:var(--visited);}

/* MOOD BOARD */
.mood-item{border:2px ridge var(--card-border);background:var(--card-bg);padding:1rem;margin:1.5rem 0;}
.mood-item h3{margin-top:0;color:var(--card-border);font-size:1.1rem;}
.mood-image{text-align:center;padding:1rem;}
.mood-image img{max-width:100%;height:auto;border:1px solid var(--section-border);display:block;margin:0 auto;}

/* WHITEBOARD MODAL */
.modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,0.5);} 
.modal-content{background-color:var(--card-bg);position:fixed;border:3px double var(--section-border);width:600px;height:400px;left:50%;top:50%;transform:translate(-50%,-50%);overflow:hidden;}
/* ---------- FULLSCREEN SCRATCH‚ÄëPAD ---------- */
.modal-content.fullscreen{width:100vw;height:100dvh;top:0;left:0;transform:none;}
.modal-content.fullscreen .modal-body{height:calc(100dvh - 52px);} /* 52¬†px header */
/* -------------------------------------------- */
.modal-header{padding:10px;background:var(--nav-bg);display:flex;justify-content:center;align-items:center;border-bottom:2px solid var(--section-border);user-select:none;position:relative;}
.modal-header h2{margin:0;font-size:1.2rem;text-align:center;}
.window-controls{display:flex;gap:10px;position:absolute;right:10px;}
.window-controls button{background:transparent;border:none;cursor:pointer;font-size:1.2rem;color:var(--txt);padding:0 5px;}
.window-controls button:hover{color:var(--link);} 
.modal-body{padding:10px;height:calc(100% - 52px);display:flex;flex-direction:column;overflow:hidden;}
.sketch-container{text-align:center;user-select:none;flex:1;display:flex;flex-direction:column;min-height:0;}
.sketch-canvas{border:2px solid var(--section-border);background:#fff;cursor:crosshair;touch-action:none;flex:1;width:100%;min-height:0;}
.theme-dark .sketch-canvas{background:#222;}
.sketch-controls{display:flex;gap:0.5rem;justify-content:center;flex-wrap:wrap;margin-top:10px;flex-shrink:0;min-height:40px;}
.sketch-controls button{padding:0.3rem 0.8rem;border:2px outset #c0c0c0;background:var(--nav-bg);font-family:inherit;cursor:pointer;font-weight:bold;}
.sketch-controls button:active{border-style:inset;}
.color-btn{width:30px;height:30px;padding:0 !important;border:2px outset #c0c0c0;}
.color-btn.active{border-style:inset;}

/* MOBILE RESPONSIVE */
@media (max-width:768px){
  .modal-content{width:95%;height:85%;}
  .mood-image img{max-width:100%;width:100%;height:auto;}
  .mood-item{padding:0.5rem;}
  .mood-image{padding:0.5rem;}
  h1{font-size:1.8rem;}
  #wrapper{width:95%;}
  .sketch-controls{gap:0.8rem;padding:10px 5px;}
  .sketch-controls button{padding:0.8rem 1.2rem;font-size:1rem;}
  .color-btn{width:40px;height:40px;}
}

/* FOOTER */
footer{margin-top:3rem;border-top:2px solid #000;padding:1rem;font-size:.9rem;background:var(--footer-bg);} 

/* FLOATING BUTTONS */
.float-btn{position:fixed;bottom:1rem;right:1rem;padding:.5rem 1rem;font-weight:bold;border:2px outset #c0c0c0;background:var(--nav-bg);color:var(--txt);cursor:pointer;}
#sketchBtn{right:5rem;}

/* QUICK LINKS */
.quick-links{display:flex;gap:1rem;justify-content:center;margin:1rem 0;flex-wrap:wrap;}
.quick-links a{padding:.5rem 1rem;border:2px outset #c0c0c0;background:var(--nav-bg);text-decoration:none;}
</style>
</head>
<body>
<button id="toggleDark" class="float-btn" aria-label="Toggle dark mode">üåô</button>
<button id="sketchBtn" class="float-btn" aria-label="Open sketchpad">‚úçÔ∏è</button>

<!-- Sketch Modal -->
<div id="sketchModal" class="modal" aria-hidden="true">
  <div class="modal-content" id="modalContent" role="dialog" aria-modal="true" aria-label="Whiteboard">
    <div class="modal-header">
      <h2>‚úéWHITEBOARD</h2>
      <div class="window-controls">
        <button id="fullscreenBtn" aria-label="Toggle fullscreen">‚õ∂</button>
        <button class="close" aria-label="Close whiteboard">&times;</button>
      </div>
    </div>
    <div class="modal-body">
      <div class="sketch-container">
        <canvas id="sketchpad" class="sketch-canvas"></canvas>
        <div class="sketch-controls">
          <button class="color-btn active" data-color="#000000" style="background:#000" aria-label="Black"></button>
          <button class="color-btn" data-color="#ff0000" style="background:#f00" aria-label="Red"></button>
          <button class="color-btn" data-color="#0000ff" style="background:#00f" aria-label="Blue"></button>
          <button class="color-btn" data-color="#00ff00" style="background:#0f0" aria-label="Green"></button>
          <button class="color-btn" data-color="eraser" style="background:#fff;border-color:#000" aria-label="Eraser">‚å´</button>
          <button id="clearBtn" aria-label="Clear drawing">üßπ</button>
        </div>
      </div>
    </div>
  </div>
</div>

<h1>üîÆ(ìÅπ ìÅπ) The Latent Realm ìÜè</h1>
<p id="quip" style="font-style:italic;margin:1rem 0;">"Man is something that shall be overcome"</p>

<div id="wrapper">
    <div class="quick-links">
    <a href="https://github.com/donkeyanaphora" target="_blank">GitHub</a>
    <a href="https://huggingface.co/cwestnedge" target="_blank">HuggingFace</a>
    <a href="cv.pdf" target="_blank">CV</a>
    <a href="https://www.linkedin.com/in/collins-westnedge/" target="_blank">LinkedIn</a>
  </div>

  <details class="section" open>
    <summary>üó∫Ô∏è About Me</summary>
    <div>
      <p>Hi, I'm Collins. I work as a Senior Data Scientist. My background is in philosophy, specifically in the philosophy of language, where my studies focused on various phenomena in natural language and the ways in which these phenomena can be formalized. This interest eventually led me to explore probabilistic approaches to language, and in turn the field of data science and machine learning as a whole.</p>
    </div>
  </details>

  <details class="section">
    <summary>üõ†Ô∏è Articles / Work</summary>
    <div>
      <div class="card">
        <h3>Shallow Fusion: Bridging Data Scarcity and AI Integration Challenges</h3>
        <p>A minor rant about "AI adoption" and exploration of shallow fusion as a method to address data scarcity and integration in specialized domains.</p>
        <p><a href="articles/article1/shallow_fusion.html">Read Article</a> ¬∑ <a href="https://github.com/donkeyanaphora/SHALLOW_FUSION" target="_blank">GPT2 Pipeline</a> ¬∑ <a href="https://github.com/donkeyanaphora/SHALLOW_FUSION/blob/main/notebooks/shallow_fusion_demo.ipynb" target="_blank">Demo</a></p>
      </div>
      <div class="card">
        <h3>Using Linear Models in Modern Applications</h3>
        <p>A closer look at how using least squares projection can offer a stable alternative to semantic filtering.</p>
        <p><a href="articles/article2.html">Read Article</a> ¬∑ <a href="projects/project2.html" target="_blank">Demo</a></p>
      </div>
    </div>
  </details>

  <details class="section">
    <summary>üî¨ Research Interests</summary>
    <div>
      <ul>
        <li>Mechanistic Interpretability</li>
        <li>Alignment</li>
        <li>Adversarial Machine Learning & Robustness</li>
        <li>NLP</li>
      </ul>
    </div>
  </details>

  <details class="section">
    <summary>üöß Coming Soon</summary>
    <div>
      <div class="uc">
        <img src="/api/placeholder/40/40" alt="Under construction" height="40"/>
        <span>Section UNDER CONSTRUCTION ‚Äî check back soon!</span>
      </div>
    </div>
  </details>

  <details class="section">
    <summary>üñºÔ∏è Mood Board</summary>
    <div>
      <div class="mood-item">
        <h3>ü§ï On Bad Conscience</h3>
        <blockquote>
          <p>At this point I can no longer avoid giving a first, preliminary expression to my own theory on the origin of <em>bad conscience</em>: it is not easy to get a hearing for this hypothesis, and it needs to be pondered, watched, and slept on.</p>
          <p>I look on bad conscience as a serious illness to which man was forced to succumb by the pressure of the most fundamental of all changes which he experienced‚Äî that change whereby he finally found himself imprisoned within the confines of society and peace.</p>
          <p>It must have been no different for these semi-animals, happily adapted to the wilderness, war, the wandering life and adventure, than it was for the sea animals when they were forced to either become land animals or perish‚Äîat one go, all instincts were devalued and <em>suspended</em>.</p>
          <p>Now they had to walk on their feet and "carry themselves," whereas they had been carried by the water up till then: a terrible heaviness bore down on them. They felt clumsy at performing the simplest task; they no longer had their familiar guide in this new, unknown world‚Äîthose regulating impulses that had unconsciously led them to safety.</p>
          <p>The poor creatures were reduced to relying on thinking, inference, calculation, and the connecting of cause with effect‚Äîin other words, to relying on their <em>consciousness</em>, that most impoverished and error-prone organ! I do not think there has ever been such a feeling of misery on earth, such a leaden discomfort‚Äîand meanwhile, the old instincts had not suddenly ceased to make their demands!</p>
          <p class="attribution">‚Äî Friedrich Nietzsche, On the Genealogy of Morals, Second Essay, ¬ß16</p>
        </blockquote>
      </div>
      <div class="mood-item">
        <h3>ü§´ Machines at Work</h3>
        <div class="mood-image">
          <img src="/api/placeholder/300/400" alt="Quiet Please ‚Äî Machines Are Learning" />
          <p style="margin-top: 0.5rem; font-style: italic;">Quiet Please ‚Äî Machines Are Learning</p>
        </div>
      </div>
    </div>
  </details>

  <details class="section">
    <summary>‚úâÔ∏è Contact</summary>
    <div>
      <p>Email: <a href="mailto:cwestnedge@gmail.com">cwestnedge@gmail.com</a></p>
    </div>
  </details>
</div>

<footer>&copy; 2025 Donkey Anaphora. All rights reserved.</footer>

<script>
/* ----------------------------------------------------------------------
   Helper utilities
---------------------------------------------------------------------- */
const $          = selector => document.querySelector(selector);
const $$         = selector => document.querySelectorAll(selector);
const isDarkMode = () => document.documentElement.classList.contains('theme-dark');

/* ----------------------------------------------------------------------
   1.  Quote rotator in the header
---------------------------------------------------------------------- */
(function rotateQuotes() {
  const quotes = [
    'Man is something that shall be overcome'
  ];
  let index = 0;
  setInterval(() => {
    index = (index + 1) % quotes.length;
    $('#quip').textContent = `"${quotes[index]}"`;
  }, 10_000);
})();

/* ----------------------------------------------------------------------
   2.  Dark‚Äë/light‚Äëmode toggle with localStorage persistence
---------------------------------------------------------------------- */
(function darkModeToggle() {
  const btn          = $('#toggleDark');
  const rootElement  = document.documentElement;
  const storageKey   = 'theme';

  // ‚Äì‚Äî initialise -------------------------------------------------------
  try {
    if (localStorage.getItem(storageKey) === 'dark') {
      rootElement.classList.add('theme-dark');
    }
  } catch (_) {/* localStorage may be blocked ‚Äì ignore */}

  const updateIcon = () => {
    btn.textContent = isDarkMode() ? '‚òÄÔ∏è' : 'üåô';
  };
  updateIcon();

  // ‚Äì‚Äî click handler ----------------------------------------------------
  btn.addEventListener('click', () => {
    rootElement.classList.toggle('theme-dark');
    updateIcon();

    try {
      localStorage.setItem(storageKey, isDarkMode() ? 'dark' : 'light');
    } catch (_) {/* ignore quota / privacy errors */}

    // update canvas background to match new theme
    updateCanvasBackground();
  });
})();

/* ----------------------------------------------------------------------
   3.  Whiteboard modal logic
---------------------------------------------------------------------- */
const modal          = $('#sketchModal');
const modalContent   = $('#modalContent');
const sketchButton   = $('#sketchBtn');
const closeButton    = $('.close');
const fullscreenBtn  = $('#fullscreenBtn');
const canvas         = $('#sketchpad');

let ctx;                       // 2‚ÄëD context (set in initWhiteboard)
let isDrawing     = false;     // pointer is pressed
let isEraserMode  = false;     // eraser vs. pen
let currentColor  = '#000000'; // default ink colour
let lastFocusEl   = null;      // element that had focus before opening
let isFullscreen  = false;     // fullscreen toggle state

/* ---------- 3a. modal open / close ----------------------------------- */
function openModal() {
  modal.style.display = 'block';
  modal.setAttribute('aria-hidden', 'false');
  lastFocusEl = document.activeElement;
  modalContent.focus();
  initWhiteboard();
}

function closeModal() {
  modal.style.display = 'none';
  modal.setAttribute('aria-hidden', 'true');
  document.body.style.overflow = '';
  if (lastFocusEl) lastFocusEl.focus();
}

sketchButton.addEventListener('click', openModal);
closeButton.   addEventListener('click', closeModal);
window.addEventListener('keydown', e => {
  if (e.key === 'Escape' && modal.style.display === 'block') closeModal();
});
window.addEventListener('click', e => {
  if (e.target === modal) closeModal();
});

/* ---------- 3b. fullscreen toggle ------------------------------------ */
fullscreenBtn.addEventListener('click', () => {
  isFullscreen = !isFullscreen;
  modalContent.classList.toggle('fullscreen', isFullscreen);
  fullscreenBtn.textContent = isFullscreen ? '‚õå' : '‚õ∂';
  document.body.style.overflow = isFullscreen ? 'hidden' : '';
  requestAnimationFrame(initWhiteboard); // rebuild canvas after resize
});

/* ----------------------------------------------------------------------
   4.  Canvas helpers
---------------------------------------------------------------------- */
function strokeSize() {
  // scale line width to device size for a consistent feel
  return isEraserMode ? Math.max(4, canvas.width / 40)
                      : Math.max(2, canvas.width / 200);
}

function resetStrokeStyle() {
  // Always draw black (or chosen colour) on a white board; no dark‚Äëmode magic
  const lw = isEraserMode ? Math.max(4, canvas.width / 40)
                          : Math.max(2, canvas.width / 200);
  ctx.lineWidth  = lw;
  ctx.lineCap    = 'round';
  ctx.lineJoin   = 'round';
  ctx.strokeStyle = isEraserMode ? '#ffffff' : currentColor;
}

function updateCanvasBackground() {
  if (!ctx) return;
  ctx.save();
  ctx.globalCompositeOperation = 'destination-over';
  ctx.fillStyle = '#ffffff';      // white board regardless of theme
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.restore();
}

/* ----------------------------------------------------------------------
   5.  Whiteboard initialisation & resize logic
---------------------------------------------------------------------- */
function initWhiteboard() {
  ctx = canvas.getContext('2d');

  // ---- resize canvas to fit container --------------------------------
  const containerRect = canvas.parentElement.getBoundingClientRect();
  const controlsH     = $('.sketch-controls').offsetHeight;
  const targetW       = Math.round(containerRect.width);
  const targetH       = Math.max(100, Math.round(containerRect.height - controlsH - 20));

  if (canvas.width !== targetW || canvas.height !== targetH) {
    // preserve drawing when resizing: copy ‚Üí resize ‚Üí draw back
    const copy = document.createElement('canvas');
    copy.width  = canvas.width;
    copy.height = canvas.height;
    copy.getContext('2d').drawImage(canvas, 0, 0);

    canvas.width  = targetW;
    canvas.height = targetH;
    ctx.drawImage(copy, 0, 0);
  }

  updateCanvasBackground();
  resetStrokeStyle();
  attachCanvasListeners();
  attachUiListeners();
}

/* ----------------------------------------------------------------------
   6.  Pointer / touch drawing handlers
---------------------------------------------------------------------- */
function canvasPos(evt) {
  const rect = canvas.getBoundingClientRect();
  const x    = (evt.touches ? evt.touches[0].clientX : evt.clientX) - rect.left;
  const y    = (evt.touches ? evt.touches[0].clientY : evt.clientY) - rect.top;
  return { x, y };
}

function beginStroke(evt) {
  evt.preventDefault();
  isDrawing = true;
  const { x, y } = canvasPos(evt);
  ctx.beginPath();
  ctx.moveTo(x, y);
}
function continueStroke(evt) {
  if (!isDrawing) return;
  evt.preventDefault();
  const { x, y } = canvasPos(evt);
  ctx.lineTo(x, y);
  ctx.stroke();
}
function endStroke() { isDrawing = false; }

function attachCanvasListeners() {
  if (canvas.dataset.listenersAttached) return; // idempotent
  canvas.dataset.listenersAttached = 'true';

  /* mouse */
  canvas.addEventListener('mousedown', beginStroke);
  canvas.addEventListener('mousemove', continueStroke);
  canvas.addEventListener('mouseup',   endStroke);
  canvas.addEventListener('mouseout',  endStroke);

  /* touch */
  canvas.addEventListener('touchstart', beginStroke, { passive:false });
  canvas.addEventListener('touchmove',  continueStroke, { passive:false });
  canvas.addEventListener('touchend',   endStroke);
}

/* ----------------------------------------------------------------------
   7.  UI controls ‚Äì colour palette, eraser, clear button
---------------------------------------------------------------------- */
function attachUiListeners() {
  // colour / eraser buttons
  $$('.color-btn').forEach(btn => {
    if (btn.dataset.wired) return;
    btn.dataset.wired = 'true';

    btn.addEventListener('click', evt => {
      $$('.color-btn.active').forEach(b => b.classList.remove('active'));
      evt.currentTarget.classList.add('active');

      const colour = evt.currentTarget.dataset.color;
      isEraserMode = (colour === 'eraser');
      if (!isEraserMode) currentColor = colour;
      resetStrokeStyle();
    });
  });

  // clear button
  const clearBtn = $('#clearBtn');
  if (!clearBtn.dataset.wired) {
    clearBtn.dataset.wired = 'true';
    clearBtn.addEventListener('click', () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      updateCanvasBackground();
    });
  }
}
</script>
</body>
</html>
