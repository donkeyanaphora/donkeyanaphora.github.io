/* ========== DESIGN TOKENS & CONTROL VARIABLES ========== */
:root{
    --bg-img: none;
    --bg-col: #fff;
    --txt: #000;
    --h1: #ff0000;
    --h1-shadow: #ffff00;
    --link: #00f;
    --visited: #808;
  
    --section-border: #00f;
    --card-border: #008;
    --card-bg: #ffffe8;
  
    --aside-bg: #f5f5f5;
    --nav-bg: #e0e0e0;
    --footer-bg: #e4e4e4;
  
    --uc-bg: #fff0f0;
    --uc-border: #f00;
    --passage-bg: #fdfdfd;
  
    /* Whiteboard control bar variables */
    --controls-gap: 0.5rem;
    --controls-padding-y: 10px;
    --slider-track-width: 4rem;
    --slider-track-height: 6px;
    
    /* Modal dimensions */
    --modal-header-height: 52px;
  }
  html.theme-dark{
    --bg-img: none;
    --bg-col: #000;
    --txt: #e0e0e0;
    --h1: #ff7373;
    --h1-shadow: #ff0000;
    --link: #5ab9ff;
    --visited: #c78bff;
  
    --section-border: #5ab9ff;
    --card-border: #5ab9ff;
    --card-bg: #111;
  
    --aside-bg: #1a1a1a;
    --nav-bg: #1f1f1f;
    --footer-bg: #1a1a1a;
  
    --uc-bg: #330000;
    --uc-border: #ff7373;
    --passage-bg: #111;
  }
  
  /* Global box sizing for more predictable layouts */
  *, *::before, *::after {
    box-sizing: border-box;
  }
  
  html, body { 
    height: 100%;
    margin: 0;
    padding: 0;
  }
  
  /* ========== GLOBAL ========== */
  body {
    background: var(--bg-img) repeat, var(--bg-col);
    color: var(--txt);
    font-family:
        "Comic Sans MS",
        "Comic Sans",
        "Comic Neue",
        "Trebuchet MS",
        Tahoma,
        sans-serif;
    text-align: center;
    transition: .4s all;
    overflow-x: hidden; /* Prevent horizontal scrollbar */
  }
  
  a { color: var(--link); }
  a:visited { color: var(--visited); }
  a:hover { background: var(--h1-shadow); }
  
  h1 {
    margin: .5em 0;
    font-size: 2.5rem;
    color: var(--h1);
    text-shadow: 2px 2px 0 var(--h1-shadow);
  }
  h2 {
    margin: 0 0 .5em;
    font-size: 1.5rem;
    color: var(--link);
  }
  
  /* ========== LAYOUT ========== */
  #wrapper {
    width: 90%;
    margin: 0 auto;
    text-align: left;
    max-width: 800px;
  }
  
  /* ========== COLLAPSIBLE SECTIONS ========== */
  details.section {
    margin: 1rem 0;
    border: 3px double var(--section-border);
    background: var(--passage-bg);
    padding: 1rem;
  }
  details.section summary {
    cursor: pointer;
    font-weight: bold;
    color: var(--link);
    font-size: 1.25rem;
    padding: .5rem 0;
  }
  details.section summary::-webkit-details-marker { display: none; }
  details.section summary::before {
    content: "▸ ";
    display: inline-block;
    transition: transform .2s;
  }
  details.section[open] summary::before { transform: rotate(90deg); }
  details.section > div { margin-top: 1rem; }
  
  /* ========== CARD ========== */
  .card {
    border: 2px ridge var(--card-border);
    background: var(--card-bg);
    padding: 1rem;
    margin: 1rem 0;
  }
  .card h3 { margin-top: 0; color: var(--card-border); }
  
  /* ========== UNDER CONSTRUCTION ========== */
  .uc {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: .6rem 1rem;
    font-weight: bold;
    font-size: .95rem;
    border: 3px dashed var(--uc-border);
    background: var(--uc-bg);
    color: inherit;
    text-decoration: none;
    border-radius: 6px;
  }
  .uc img { flex: 0 0 auto; }
  .uc:hover { background: var(--uc-bg); cursor: default; }
  
  /* ========== BLOCKQUOTE ========== */
  blockquote {
    margin: 1rem 0;
    padding-left: 1.5rem;
    border-left: 4px solid var(--section-border);
    font-style: italic;
  }
  .attribution {
    text-align: right;
    font-style: normal;
    margin-top: 1rem;
    color: var(--visited);
  }
  
  /* ========== MOOD BOARD ========== */
  .mood-item {
    border: 2px ridge var(--card-border);
    background: var(--card-bg);
    padding: 1rem;
    margin: 1.5rem 0;
    text-align: left;
  }
  .mood-item h3 { margin-top: 0; color: var(--card-border); font-size: 1.1rem; }
  .mood-image { text-align: center; padding: 1rem; }
  .mood-image img {
    max-width: 100%;
    max-height: 400px;
    width: auto;
    height: auto;
    object-fit: contain;
    border: 1px solid var(--section-border);
    display: block;
    margin: 0 auto;
  }
  
  /* ========== MOOD BOARD – Scrollable long posts ========== */
  .scroll-pane {
    max-height: 400px;            /* adjust window height */
    overflow-y: auto;
    border-left: 4px solid var(--card-border);   /* matches cards */
    padding-left: 0.75rem;
    margin: 0.5rem 0 1.25rem;
  }
  
  /* optional: nicer dark-mode scrollbar (WebKit/Blink) */
  html.theme-dark .scroll-pane::-webkit-scrollbar {
    width: 8px;
  }
  html.theme-dark .scroll-pane::-webkit-scrollbar-track {
    background: #111;
  }
  html.theme-dark .scroll-pane::-webkit-scrollbar-thumb {
    background: #555;
  }
  
  /* ========== WHITEBOARD MODAL ========== */
  .modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
  }
  .modal-content {
    background-color: var(--card-bg);
    position: fixed;
    border: 3px double var(--section-border);
    width: 600px;
    height: 400px;
    left: 50%;
    top: 50%;
    transform: translate(-50%,-50%);
    overflow: hidden;
  }
  .modal-content.fullscreen {
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    margin: 0;
    transform: none;
    border: none;
    border-radius: 0;
  }
  .modal-content.fullscreen .modal-body {
    height: calc(100% - var(--modal-header-height));
  }
  .modal-header {
    height: var(--modal-header-height);
    padding: 10px;
    background: var(--nav-bg);
    display: flex;
    justify-content: center;
    align-items: center;
    border-bottom: 2px solid var(--section-border);
    user-select: none;
    position: relative;
  }
  .modal-header h2 { margin: 0; font-size: 1.2rem; text-align: center; }
  .window-controls {
    display: flex;
    gap: 10px;
    position: absolute;
    right: 10px;
  }
  .window-controls button {
    background: transparent;
    border: none;
    cursor: pointer;
    font-size: 1.2rem;
    color: var(--txt);
    padding: 0 5px;
  }
  .window-controls button:hover { color: var(--link); }
  .modal-body {
    padding: 10px;
    height: calc(100% - var(--modal-header-height));
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }
  .sketch-container {
    text-align: center;
    user-select: none;
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
  }
  .sketch-canvas {
    border: 2px solid var(--section-border);
    background: #fff;
    cursor: crosshair;
    touch-action: none;
    flex: 1;
    width: 100%;
    min-height: 0;
  }
  .theme-dark .sketch-canvas { background: #222; }
  
  /* ─────────────────────────────────────────────────────────── */
  /*  WHITEBOARD CONTROLS                                       */
  /* ─────────────────────────────────────────────────────────── */
  .sketch-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--controls-gap);
    flex-wrap: wrap;
    padding: var(--controls-padding-y) 0;
    min-height: 40px;
    position: relative;
  }
  
  /* pin slider group left */
  .slider-group {
    position: absolute;
    left: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    align-items: center;
    gap: 0.25rem;
  }
  
  #strokeSizeSlider {
    width: var(--slider-track-width);
    height: var(--slider-track-height);
    cursor: ew-resize;
  }
  
  .sketch-controls button {
    padding: 0.3rem 0.8rem;
    border: 2px outset #c0c0c0;
    background: var(--nav-bg);
    font-family: inherit;
    cursor: pointer;
    font-weight: bold;
  }
  .sketch-controls button:active { border-style: inset; }
  .color-btn {
    width: 30px;
    height: 30px;
    padding: 0 !important;
    border: 2px outset #c0c0c0;
  }
  .color-btn.active { border-style: inset; }
  
  /* Pseudo‑code textarea dark theme */
  html.theme-dark #codeArea {
    background: #222;
    color: #e0e0e0;
  }
  
  /* FOOTER */
  footer {
    margin-top: 3rem;
    border-top: 2px solid #000;
    padding: 1rem;
    font-size: .9rem;
    background: var(--footer-bg);
  }
  
  /* FLOATING BUTTONS */
  .float-btn {
    position: fixed;
    bottom: 1rem;
    right: 1rem;
    padding: .5rem 1rem;
    font-weight: bold;
    border: 2px outset #c0c0c0;
    background: var(--nav-bg);
    color: var(--txt);
    cursor: pointer;
    z-index: 900;
  }
  #sketchBtn { right: 5rem; }
  #codeBtn   { right: 9rem; }
  
  /* QUICK LINKS */
  .quick-links {
    display: flex;
    gap: 1rem;
    justify-content: center;
    margin: 1rem 0;
    flex-wrap: wrap;
  }
  .quick-links a {
    padding: .5rem 1rem;
    border: 2px outset #c0c0c0;
    background: var(--nav-bg);
    text-decoration: none;
  }
  
  /* Quick‑link placeholders */
  .quick-links a.disabled {
    pointer-events: none;
    cursor: default;
    opacity: .9;
  }
  
  /* allow uc styling inside quick links */
  .quick-links a.uc {
    border: 3px dashed var(--uc-border);
    background: var(--uc-bg);
  }
  .quick-links a.uc:hover { background: var(--uc-bg); }
  
  
  /* ─── ARTICLE / MARKDOWN PAGES ───────────────────────────── */
  /* ❶––– FRAME (keep as-is) ––––––––––––––––––––––––––––––––– */
  details.section,
  article.markdown-body {
    border: 3px double var(--section-border);
    background: var(--passage-bg);
    padding: 1rem;
  }
  
  /* ❷––– POSITION + TEXT FLOW ––––––––––––––––––––––––––––––– */
  article.markdown-body {
    margin-left: auto;   /* centers the whole box */
    margin-right: auto;
    text-align: left;     /* overrides body { text-align:center } */
    
    /* (everything below can stay or be adjusted to taste) */
    font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
    font-size: 1.0625rem;
    line-height: 1.55;
    max-width: 42em;
  }
  
  /* ❸–––  PANDOC-STYLE TYPE DETAILS  –––––––––––––––––––––––– */
  article.markdown-body p             { margin: 0 0 1.1em; }
  article.markdown-body h1            { font-size: 2em;  margin: 1.2em 0 0.6em; }
  article.markdown-body h2            { font-size: 1.6em; margin: 1.1em 0 0.5em; }
  article.markdown-body h3            { font-size: 1.3em; margin: 1em   0 0.5em; }
  article.markdown-body h4,
  article.markdown-body h5,
  article.markdown-body h6            { margin: 0.8em 0 0.4em; }
  article.markdown-body ul,
  article.markdown-body ol            { margin: 0 0 1em 1.5em; }
  
  article.markdown-body code {
    font-family: "SFMono-Regular", Consolas, "Liberation Mono", monospace;
    font-size: 0.95em;
    background: rgba(127,127,127,0.08);
    padding: 0.05em 0.3em;
    border-radius: 3px;
  }
  article.markdown-body pre code {
    display: block;
    padding: 0.9em 1em;
    overflow-x: auto;
  }
  article.markdown-body img {
    max-width: 50%;   /* scales down to the width of the article box */
    height: auto;      /* keeps aspect ratio */
    display: block;    /* removes stray inline gap */
    margin: 0.5rem auto;   /* centers it nicely */
  }
  
  /* MOBILE RESPONSIVE */
  @media (max-width: 768px) {
    .modal-content { 
      width: 95%; 
      height: 85%; 
    }
    .mood-image img { 
      max-width: 100%; 
      width: 100%; 
      height: auto; 
    }
    .mood-item { 
      padding: 0.5rem; 
    }
    .mood-image { 
      padding: 0.5rem; 
    }
    h1 { 
      font-size: 1.8rem; 
    }
    #wrapper { 
      width: 95%; 
    }
    .sketch-controls { 
      gap: 0.8rem; 
      padding: var(--controls-padding-y) 0; 
    }
    .sketch-controls button { 
      padding: 0.8rem 1.2rem; 
      font-size: 1rem; 
    }
    .color-btn { 
      width: 40px; 
      height: 40px; 
    }
  }
  
  /* EQUATION HANDLING FOR ARTICLE PAGES */
  .MathJax_Display, 
  .math-display,
  mjx-container[jax="CHTML"][display="true"] {
    overflow-x: auto;
    max-width: 100%;
    padding-bottom: 5px; /* Space for scrollbar */
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
  }
  
  /* Style scrollbars for equations */
  .MathJax_Display::-webkit-scrollbar,
  .math-display::-webkit-scrollbar,
  mjx-container[jax="CHTML"][display="true"]::-webkit-scrollbar {
    height: 4px;
  }
  
  .MathJax_Display::-webkit-scrollbar-thumb,
  .math-display::-webkit-scrollbar-thumb,
  mjx-container[jax="CHTML"][display="true"]::-webkit-scrollbar-thumb {
    background: rgba(0,0,0,0.2);
    border-radius: 2px;
  }
  
  /* SUPER-SIZED MOBILE BUTTON FOR ARTICLE PAGES */
  /* Target mobile devices specifically, regardless of viewport setting */
  @media screen and (max-device-width: 480px) {
    /* Make button EXTRA large on phones */
    body.article #toggleDark.float-btn {
      /* Dramatic size increase */
      width: 60px;
      height: 60px;
      border-radius: 50%; /* Perfectly round */
      font-size: 30px; /* Huge icon */
      
      /* Better positioning */
      bottom: 20px;
      right: 20px;
      
      /* Better styling */
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
      
      /* Visual enhancements */
      box-shadow: 0 3px 12px rgba(0, 0, 0, 0.5);
      border: 3px solid rgba(255, 255, 255, 0.3);
      
      /* Ensure visibility */
      z-index: 9999;
    }
    
    /* Dark mode version */
    html.theme-dark body.article #toggleDark.float-btn {
      box-shadow: 0 3px 12px rgba(0, 0, 0, 0.7);
      border: 3px solid rgba(255, 255, 255, 0.15);
    }
  }
  
  /* For tablets - still bigger but not as huge as on phones */
  @media screen and (min-device-width: 481px) and (max-device-width: 1024px) {
    body.article #toggleDark.float-btn {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      z-index: 9999;
    }
  }